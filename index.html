<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
    </style>
  </head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <body>
    <div id="map"></div>
    <script type="text/javascript">

var map;
var centerLocation = {lat: 40.4447831, lng: -79.94996};
var meetingLocation = {lat: 40.443709, lng: -79.944451};
var cafeLocation = {lat: 40.443919, lng: -79.948974};
var professorLocation = {lat: 40.446123, lng: -79.954576};
var newProfessorLocation;
var professorInfowindow;
var professorMarker;
var professorDrivingControl;
var professorWalkingControl;
var professorCyclingControl;
var professorTransitControl;

function ProfessorDrivingControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.id = "professorDriving";
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Driving';
  controlUI.appendChild(controlText);
  
  controlUI.addEventListener('click', function() {
	  var event = new CustomEvent("clicked", { "detail": "driving" });
	  document.dispatchEvent(event);
	  
	  
	  controlUI.style.backgroundColor = 'yellow';
	  travelMode = google.maps.TravelMode.DRIVING;
	  var service = new google.maps.DistanceMatrixService;
	    service.getDistanceMatrix({
	      origins: [newProfessorLocation],
	      destinations: [meetingLocation],
	      travelMode: travelMode,
	      unitSystem: google.maps.UnitSystem.METRIC,
	      avoidHighways: false,
	      avoidTolls: false
	    }, function(response, status) {
	      if (status !== google.maps.DistanceMatrixStatus.OK) {
	        alert('Error was: ' + status);
	      } else {
			  
	          var result = response.rows[0].elements;
			  var contentString = result[0].duration.text;
			  professorInfowindow.setContent(contentString);
			  professorInfowindow.open(map, professorMarker);
	      }
	    });
		
	  professorInfowindow.open(map, professorMarker);
  });

}

function ProfessorWalkingControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.id = "professorWalking";
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Walking';
  controlUI.appendChild(controlText);

  // var professorTransitButton = document.getElementById("professorTransit");
  //
  // if (professorTransitButton == null){
  // 	  alert("null!");
  // }
    //
  // professorTransitButton.style.backgroundColor = 'white';
  controlUI.addEventListener('click', function() {
	  
	  var event = new CustomEvent("clicked", { "detail": "walking" });
	  document.dispatchEvent(event);
	  
	  
	  controlUI.style.backgroundColor = 'yellow';
	  travelMode=google.maps.TravelMode.WALKING;
	  var service = new google.maps.DistanceMatrixService;
	    service.getDistanceMatrix({
	      origins: [newProfessorLocation],
	      destinations: [meetingLocation],
	      travelMode: travelMode,
	      unitSystem: google.maps.UnitSystem.METRIC,
	      avoidHighways: false,
	      avoidTolls: false
	    }, function(response, status) {
	      if (status !== google.maps.DistanceMatrixStatus.OK) {
	        alert('Error was: ' + status);
	      } else {
	          var result = response.rows[0].elements;
			  var contentString = result[0].duration.text;
			  professorInfowindow.setContent(contentString);
			  professorInfowindow.open(map, professorMarker);
	      }
	    });
		
	  professorInfowindow.open(map, professorMarker);
  });
}


function ProfessorCyclingControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.id = "professorCycling";
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Cycling';
  controlUI.appendChild(controlText);

  controlUI.addEventListener('click', function() {
	  var event = new CustomEvent("clicked", { "detail": "cycling" });
	  document.dispatchEvent(event);
	  
	  controlUI.style.backgroundColor = 'yellow';
	  professorTransitControl.controlUI.style.backgroundColor = 'white';
	  travelMode=google.maps.TravelMode.BICYCLING;
	  var service = new google.maps.DistanceMatrixService;
	    service.getDistanceMatrix({
	      origins: [newProfessorLocation],
	      destinations: [meetingLocation],
	      travelMode: travelMode,
	      unitSystem: google.maps.UnitSystem.METRIC,
	      avoidHighways: false,
	      avoidTolls: false
	    }, function(response, status) {
	      if (status !== google.maps.DistanceMatrixStatus.OK) {
	        alert('Error was: ' + status);
	      } else {
	          var result = response.rows[0].elements;
			  var contentString = result[0].duration.text;
			  professorInfowindow.setContent(contentString);
			  professorInfowindow.open(map, professorMarker);
	      }
	    });
		
	  professorInfowindow.open(map, professorMarker);
  });
}

function ProfessorTransitControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.id = 'professorTransit';
  controlUI.style.backgroundColor = 'white';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Transit';
  controlUI.appendChild(controlText);

  controlUI.addEventListener('click', function() {
	  var event = new CustomEvent("clicked", { "detail": "transit" });
	  document.dispatchEvent(event);
	  
	  controlUI.style.backgroundColor = 'yellow';
	  travelMode = google.maps.TravelMode.TRANSIT;
	  var service = new google.maps.DistanceMatrixService;
	    service.getDistanceMatrix({
	      origins: [newProfessorLocation],
	      destinations: [meetingLocation],
	      travelMode: travelMode,
	      unitSystem: google.maps.UnitSystem.METRIC,
	      avoidHighways: false,
	      avoidTolls: false
	    }, function(response, status) {
	      if (status !== google.maps.DistanceMatrixStatus.OK) {
	        alert('Error was: ' + status);
	      } else {
	          var result = response.rows[0].elements;
			  var contentString = result[0].duration.text;
			  professorInfowindow.setContent(contentString);
			  professorInfowindow.open(map, professorMarker);
	      }
	    });
		
	  professorInfowindow.open(map, professorMarker);
  });
}

//

function MeDrivingControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Driving';
  controlUI.appendChild(controlText);


}

function MeWalkingControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Walking';
  controlUI.appendChild(controlText);

}


function MeCyclingControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Cycling';
  controlUI.appendChild(controlText);

}

function MeTransitControl(controlDiv, map) {

  // Set CSS for the control border.
  var controlUI = document.createElement('div');
  controlUI.style.backgroundColor = '#fff';
  controlUI.style.border = '2px solid #fff';
  controlUI.style.borderRadius = '3px';
  controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
  controlUI.style.cursor = 'pointer';
  controlUI.style.marginBottom = '22px';
  controlUI.style.textAlign = 'center';
  controlUI.title = 'Click to recenter the map';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control interior.
  var controlText = document.createElement('div');
  controlText.style.color = 'rgb(25,25,25)';
  controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
  controlText.style.fontSize = '16px';
  controlText.style.lineHeight = '38px';
  controlText.style.paddingLeft = '5px';
  controlText.style.paddingRight = '5px';
  controlText.innerHTML = 'Transit';
  controlUI.appendChild(controlText);

}



function initMap() {
	
  var myOptions = {
    	center: centerLocation,
    	zoom: 17,
	    mapTypeControlOptions: {
	      mapTypeIds: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.HYBRID]
	    }, // here´s the array of controls
	    disableDefaultUI: true, // a way to quickly hide all controls
	    mapTypeControl: false,
	    scaleControl: true,
	    zoomControl: true,
	    zoomControlOptions: {
	      style: google.maps.ZoomControlStyle.LARGE 
	    },
	    mapTypeId: google.maps.MapTypeId.ROADMAP
	};
  map = new google.maps.Map(document.getElementById("map"), myOptions); 
  
  professorInfowindow = new google.maps.InfoWindow({
      content: ""
  });
  
  var meetingMarker = new google.maps.Marker({
      position: meetingLocation,
      map: map,
      icon: 'meeting.png'
  });
  
  var cafeMarker = new google.maps.Marker({
      position: cafeLocation,
      map: map,
      icon: 'cafe.png'
  });
  professorMarker = new google.maps.Marker({
      position: professorLocation,
      map: map,
	  draggable:true,
      icon: 'professor.png'
  });
 
  professorMarker.addListener('dragend',function(event) {
	  
      newProfessorLocation = {lat: event.latLng.lat(), lng:event.latLng.lng()};
	  
	  var service = new google.maps.DistanceMatrixService;
	    service.getDistanceMatrix({
	      origins: [newProfessorLocation],
	      destinations: [meetingLocation],
	      travelMode: google.maps.TravelMode.WALKING,
	      unitSystem: google.maps.UnitSystem.METRIC,
	      avoidHighways: false,
	      avoidTolls: false
	    }, function(response, status) {
	      if (status !== google.maps.DistanceMatrixStatus.OK) {
	        alert('Error was: ' + status);
	      } else {
	          var result = response.rows[0].elements;
			  var contentString = result[0].duration.text;
			  professorInfowindow.setContent(contentString);
			  professorInfowindow.open(map, professorMarker);
	      }
	    });
  });
  
	
	
  var professorDrivingControlDiv = document.createElement('div');
  professorDrivingControl = new ProfessorDrivingControl(professorDrivingControlDiv, map);

  professorDrivingControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.LEFT_CENTER].push(professorDrivingControlDiv);
  
  var professorWalkingControlDiv = document.createElement('div');
  professorWalkingControl = new ProfessorWalkingControl(professorWalkingControlDiv, map);
  
  professorWalkingControlDiv.index = 2;
  map.controls[google.maps.ControlPosition.LEFT_CENTER].push(professorWalkingControlDiv);
  
  var professorCyclingControlDiv = document.createElement('div');
  professorCyclingControl = new ProfessorCyclingControl(professorCyclingControlDiv, map);

  professorCyclingControlDiv.index = 3;
  map.controls[google.maps.ControlPosition.LEFT_CENTER].push(professorCyclingControlDiv);
  
  var professorTransitControlDiv = document.createElement('div');
  professorTransitControl = new ProfessorTransitControl(professorTransitControlDiv, map);

  professorTransitControlDiv.index = 4;
  map.controls[google.maps.ControlPosition.LEFT_CENTER].push(professorTransitControlDiv);
  

  

 

  document.addEventListener("clicked", function(e) {
	  if (e.detail == "transit"){
	  	professorCyclingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
		professorDrivingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
		professorWalkingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
	  }
	  if (e.detail == "driving"){
	  	professorTransitControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
	  	professorCyclingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
		professorWalkingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
	  }
	  if (e.detail == "cycling"){
  	  	professorTransitControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
  	  	professorDrivingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
  		professorWalkingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
	  }
	  if (e.detail == "walking"){
	  	professorTransitControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
	  	professorCyclingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
		professorDrivingControlDiv.getElementsByTagName("div")[0].style.backgroundColor='white';
	  }
  });
  
    //me
  
  var meDrivingControlDiv = document.createElement('div');
  var meDrivingControl = new MeDrivingControl(meDrivingControlDiv, map);

  meDrivingControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_CENTER].push(meDrivingControlDiv);
  
  var meWalkingControlDiv = document.createElement('div');
  var meWalkingControl = new MeWalkingControl(meWalkingControlDiv, map);

  meWalkingControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_CENTER].push(meWalkingControlDiv);
  
  var meCyclingControlDiv = document.createElement('div');
  var meCyclingControl = new MeCyclingControl(meCyclingControlDiv, map);

  meCyclingControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_CENTER].push(meCyclingControlDiv);
  
  var meTransitControlDiv = document.createElement('div');
  var meTransitControl = new MeTransitControl(meTransitControlDiv, map);

  meTransitControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_CENTER].push(meTransitControlDiv);
  
}

    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBund-jrw1j4imhBHAVLEPknUFyrB_jxdQ&callback=initMap">
    </script>
  </body>
</html>